(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[696],{4319:function(e,i,n){Promise.resolve().then(n.bind(n,4786))},6705:function(e,i,n){"use strict";var a=n(2173);i.Z=a.Z.create({baseURL:"http://localhost:8080/api"})},4786:function(e,i,n){"use strict";n.r(i),n.d(i,{default:function(){return B}});var a=n(7437),t=n(2265),s=n(4930),r=n.n(s),o=n(4033),d=n(8529),c=n.n(d),l=n(5954),u=n(9914),_=n.n(u),m=n(3855),p=n.n(m),h=n(6705),v=n(4602),g=n(5710),x=n(2815),f=()=>{let[e,i]=(0,t.useState)(1),[n,s]=(0,t.useState)(1),[r,o]=(0,t.useState)([]),{gameId:d}=(0,l.UO)(),c=(0,t.useRef)(),u=()=>{x.p8.fromTo(c.current,1,{opacity:0},{opacity:1,duration:1})};return(0,t.useEffect)(()=>{v.Sk(d),v.DX(async()=>{let{data:e}=await h.Z.get("/questions"),i=e.sort((e,i)=>.5-Math.random());o(i),v.lk({game_id:d,question:{...i[0],questionNumber:1}})})},[d]),(0,a.jsx)(g.E.div,{initial:!1,transition:{ease:"easeOut",duration:2},children:(0,a.jsx)(p(),{children:(0,a.jsxs)(p(),{children:[(0,a.jsxs)("div",{className:_().card,ref:c,children:[r.slice(e-1,e).map((e,i)=>(0,a.jsxs)("div",{className:_().cardContent,children:[(0,a.jsx)("div",{className:_().cardHeader,children:(0,a.jsxs)("p",{className:_().questionNumber,children:["Question ",n]})}),(0,a.jsx)("div",{className:_().question,children:(0,a.jsx)("p",{children:e.question})})]},i)),(0,a.jsxs)("div",{className:_().buttons,children:[e>1?(0,a.jsx)("button",{onClick:()=>{u();let a=n-1,t=r[a-1];i(e-1),s(a),v.lk({game_id:d,question:{...t,questionNumber:a}})},children:"back"}):(0,a.jsx)("button",{className:_().hidden,children:"back"}),e<r.length&&(0,a.jsx)("button",{onClick:()=>{u();let a=n+1,t=r[a-1];i(e+1),s(a),v.lk({game_id:d,question:{...t,questionNumber:a}})},className:_().next,children:"next card"})]})]}),(0,a.jsxs)("p",{className:_().decide,children:["Decide who goes first and take turns answering each question. \uD83C\uDF89"," "]})]})})})},j=n(5336),y=n.n(j),b=()=>{let[e,i]=(0,t.useState)(1),[n,s]=(0,t.useState)([]),{gameId:r}=(0,l.UO)(),o=(0,t.useRef)(null);return((0,t.useEffect)(()=>{v.U8(r),v.Gg(e=>{i(e.questionNumber),s(e.question),x.p8.fromTo(o.current,1,{opacity:0},{opacity:1,duration:1})})},[r]),n)?(0,a.jsx)(p(),{children:(0,a.jsxs)(p(),{children:[(0,a.jsx)("div",{className:y().card,ref:o,children:(0,a.jsxs)("div",{className:y().cardContent,children:[(0,a.jsx)("div",{className:y().cardHeader,children:(0,a.jsxs)("p",{className:y().questionNumber,children:["Question ",e]})}),(0,a.jsx)("div",{className:y().question,children:(0,a.jsx)("p",{children:n})})]})}),(0,a.jsx)("p",{className:y().decide,children:"Decide who goes first and take turns answering each question. \uD83C\uDF89"})]})}):null},N=n(1225),C=n(9038),D=n.n(C),w=n(705),q=n(1396),k=n.n(q),E=n(4349),G=n.n(E),S=()=>{let e=(0,t.useRef)(),i={x:-1,y:-1};return(0,t.useEffect)(()=>{x.p8.from(e.current,1,{...i,opacity:0,zIndex:1,delay:.2})},[]),(0,a.jsxs)("div",{className:G().card,ref:e,children:[(0,a.jsxs)("p",{children:["The other player has ",(0,a.jsx)("br",{})," ended this session."]}),(0,a.jsx)(k(),{href:"/feedback",children:(0,a.jsx)("button",{children:"Exit deepdiive"})})]})},I=n(5188),V=n(2021);let L=r()(()=>n.e(487).then(n.bind(n,5035)),{loadableGenerated:{webpack:()=>[5035]},ssr:!1});var B=()=>{let[e,i]=(0,t.useState)(""),[n,s]=(0,t.useState)(""),[r,d]=(0,t.useState)(!1),[l,u]=(0,t.useState)(!1),{gameId:_}=(0,o.useParams)(),m=(0,o.useRouter)(),{modalIsOpen:p,closeModal:x}=(0,I.j)(),[j,y]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{y(!0),setTimeout(()=>{y(!1)},3e3)},[]),(0,t.useEffect)(()=>{(async()=>{let{data:e}=await h.Z.get("/links/users/".concat(_));i(e.player[0]),s(e.player[1]),d((0,w.Bh)(e.player[0]));let n=(0,w.Bh)(e.player[0]),a=(0,w.jB)(e.player[1]);n||a||m.push("/onboarding/invite/".concat(_)),v.nL(()=>{u(!0)})})()},[_,r,m]),j?(0,a.jsx)(V.a,{hasText:!1}):(0,a.jsx)(g.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,a.jsxs)("div",{children:[(0,a.jsxs)(c(),{isOpen:p,onRequestClose:x,ariaHideApp:!1,contentLabel:"Exit Modal",closeTimeoutMS:300,children:[(0,a.jsx)("p",{className:D().modalText,children:"Are you sure you want to exit?"}),(0,a.jsxs)("div",{className:D().modalButtons,children:[(0,a.jsx)("button",{onClick:x,children:"no"}),(0,a.jsx)(k(),{href:"/feedback",children:(0,a.jsx)("button",{className:D().yes,onClick:()=>{v.Hf(_)},children:"yes"})})]})]}),(0,a.jsxs)("div",{className:D().gameDiv,children:[(0,a.jsx)("div",{className:D().navDiv,children:(0,a.jsx)(L,{color:"#FDFCFB"})}),l&&(0,a.jsx)("div",{className:D().overlay,children:(0,a.jsx)("div",{className:D().ended,children:(0,a.jsx)(S,{})})}),(0,a.jsx)("div",{className:D().cardDiv,children:r?(0,a.jsx)(f,{}):(0,a.jsx)(b,{})}),(0,a.jsx)("div",{className:D().playerDiv,children:(0,a.jsx)(N.Z,{host:e,guest:n})})]})]})})}},1225:function(e,i,n){"use strict";var a=n(7437),t=n(7972),s=n.n(t);i.Z=e=>{let{host:i,guest:n}=e;return console.log(i),(0,a.jsxs)("div",{className:s().players,children:[(0,a.jsx)("div",{className:s().playerCard,children:(0,a.jsx)("p",{children:i})}),(0,a.jsx)("div",{className:s().playerCard,children:(0,a.jsx)("p",{children:n||"player"})})]})}},2021:function(e,i,n){"use strict";n.d(i,{a:function(){return c}});var a=n(7437);n(2265);var t=n(6691),s=n.n(t),r=n(5761),o=n.n(r),d=n(6582);let c=e=>{let{hasText:i}=e;return(0,a.jsxs)("div",{className:o().loader,children:[(0,a.jsx)(s(),{src:d.Y.logoIcon,alt:"",className:o().rotate,width:192,height:192,priority:!0}),i&&(0,a.jsx)("p",{children:"Your Room Is Loading"})]})}},6582:function(e,i,n){"use strict";n.d(i,{Y:function(){return t},z:function(){return s}});var a=n(705);let t={landingPageImage:(0,a.vb)("https://res.cloudinary.com/deepdiive/image/upload/v1669458897/Deepdiive%20images/Landing_Page_png_acgueo.png"),logoIcon:(0,a.vb)("https://res.cloudinary.com/deepdiive/image/upload/v1669461952/Deepdiive%20images/logo_circle_lylgit.png"),mobileWave:(0,a.vb)("https://res.cloudinary.com/deepdiive/image/upload/v1669473808/Deepdiive%20images/mobile-wave_gwyjxa.png"),playCard:(0,a.vb)("https://res.cloudinary.com/deepdiive/image/upload/v1669474104/Deepdiive%20images/play-card_kwelbi.png"),chromeImg:(0,a.vb)("https://res.cloudinary.com/deepdiive/image/upload/v1669476368/Deepdiive%20images/chrome_c1rbgc.png")},s={oceanWaves:"https://res.cloudinary.com/deepdiive/image/upload/v1669468725/Deepdiive%20gifs/ocean-waves_i4cv6j.gif",onboarding1:"https://res.cloudinary.com/deepdiive/image/upload/v1669468673/Deepdiive%20gifs/onboard3_iqoykq.gif",onboarding2:"https://res.cloudinary.com/deepdiive/image/upload/v1669468743/Deepdiive%20gifs/onboard4_k7pg4a.gif",onboarding3:"https://res.cloudinary.com/deepdiive/image/upload/v1669468758/Deepdiive%20gifs/onboard5_rqmejs.gif",onboarding4:"https://res.cloudinary.com/deepdiive/image/upload/v1669468773/Deepdiive%20gifs/onboard6_ulxhux.gif",onboarding5:"https://res.cloudinary.com/deepdiive/image/upload/v1669468788/Deepdiive%20gifs/onboard7_n2ue6k.gif"}},4602:function(e,i,n){"use strict";n.d(i,{$j:function(){return s},DX:function(){return u},Gg:function(){return r},Hf:function(){return m},MA:function(){return c},Nk:function(){return h},Sk:function(){return d},U8:function(){return l},lk:function(){return o},nL:function(){return _},v:function(){return p}});var a=n(3388);let t=null,s=(e,i)=>{t=(0,a.io)("http://localhost:8080/api"),console.log("first connection"),t.on("connect",()=>{t.emit("join_game",{game_id:e})}),t.on("users_ready",()=>{i()})},r=e=>{t&&t.on("question",i=>{e(i)})},o=e=>{t&&t.emit("next_question",e)},d=e=>{t&&t.emit("host_game_started",{game_id:e})},c=e=>{t&&t.on("guest_game_can_start",()=>{e()})},l=e=>{t&&t.emit("guest_game_started",{game_id:e})},u=e=>{t&&t.on("game_start",()=>{e()})},_=e=>{t&&t.on("game_end",()=>{e()})},m=e=>{t&&t.emit("end_game",{game_id:e})},p=e=>{t&&t.on("guest_join",()=>{e()})},h=e=>{t&&t.emit("guest_joined_game",{game_id:e})}},705:function(e,i,n){"use strict";n.d(i,{Bh:function(){return t},jB:function(){return s},vb:function(){return a}});let a=e=>e.replace(/upload\//,"$&q_auto,f_auto,fl_lossy/"),t=e=>(localStorage.getItem("deepdiive_host")||"")===e,s=e=>(localStorage.getItem("deepdiive_guests")||"")===e},5188:function(e,i,n){"use strict";n.d(i,{j:function(){return a}});let a=(0,n(4660).Ue)(e=>({modalIsOpen:!1,showExitAlert:!1,openModal:()=>e({modalIsOpen:!0}),closeModal:()=>e({modalIsOpen:!1}),openAlertModal:()=>e({showExitAlert:!0})}))},9038:function(e){e.exports={gameDiv:"GameView_gameDiv__MSThj",navDiv:"GameView_navDiv__r_iy6",cardDiv:"GameView_cardDiv__My2bS",playerDiv:"GameView_playerDiv__c9zlZ",reactionDiv:"GameView_reactionDiv__Shubh",modalButtons:"GameView_modalButtons__48Y8j",yes:"GameView_yes__qs_hw",modalText:"GameView_modalText__gjNVJ",overlay:"GameView_overlay__E_yI_",ended:"GameView_ended__E92rX"}},9914:function(e){e.exports={card:"Card_card__RlVbj",cardContent:"Card_cardContent__WtWu_",questionNumber:"Card_questionNumber__WZsUq",question:"Card_question__zung3",buttons:"Card_buttons__bB8Mc",next:"Card_next__0EWZy",hidden:"Card_hidden__LBwfH",decide:"Card_decide__4vlpF"}},4349:function(e){e.exports={card:"ExitAlert_card__NXbjD"}},5336:function(e){e.exports={card:"GuestCard_card__GTsFb",cardContent:"GuestCard_cardContent__0xmXw",questionNumber:"GuestCard_questionNumber__FfesN",question:"GuestCard_question__wl_Sd",decide:"GuestCard_decide__m9myn"}},7972:function(e){e.exports={players:"Players_players__LYQsE",playerCard:"Players_playerCard__5Iykh"}},5761:function(e){e.exports={loader:"Loader_loader__3VCzL",rotate:"Loader_rotate__eZhwt",rotation:"Loader_rotation__y77ax"}}},function(e){e.O(0,[922,252,691,268,396,866,173,388,496,971,938,744],function(){return e(e.s=4319)}),_N_E=e.O()}]);